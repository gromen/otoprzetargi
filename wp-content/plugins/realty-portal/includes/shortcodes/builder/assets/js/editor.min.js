!function(t){void 0===window.$ns.mixins&&(window.$ns.mixins={}),$ns.mixins.Events={bind:function(t,e){return void 0===this.$$events&&(this.$$events={}),void 0===this.$$events[t]&&(this.$$events[t]=[]),this.$$events[t].push(e),this},unbind:function(e,i){if(void 0===this.$$events||void 0===this.$$events[e])return this;if(void 0!==i){var n=t.inArray(i,this.$$events[e]);-1!=n&&this.$$events[e].splice(n,1)}else this.$$events[e]=[];return this},trigger:function(t,e){if(void 0===this.$$events||void 0===this.$$events[t]||0==this.$$events[t].length)return this;for(var i=0;i<this.$$events[t].length;i++)this.$$events[t][i].apply(this,e);return this}},$ns.Field=function(e,i){if(this.$control=t(e),this.form=i,this.$control.data("nsfield"))return this.$control.data("nsfield");if(this.type=this.$control.data("param_type"),this.name=this.$control.data("param_name"),this.$input=this.$control.find("input[name], textarea[name], select[name]"),this.inited=!1,void 0!==$ns.Field[this.type])for(var n in $ns.Field[this.type])if($ns.Field[this.type].hasOwnProperty(n)){if(void 0!==this[n]){var s="parent"+n.charAt(0).toUpperCase()+n.slice(1);this[s]=this[n]}this[n]=$ns.Field[this.type][n]}this.$control.data("nsfield",this);var o=function(){this.init(),this.inited=!0,this.unbind("beforeShow",o)}.bind(this);this.bind("beforeShow",o)},t.extend($ns.Field.prototype,$ns.mixins.Events,{init:function(){this.$input.on("change",function(){this.trigger("change",[this.getValue()])}.bind(this))},deinit:function(){},getValue:function(){return this.$input.val()},setValue:function(t){this.$input.val(t),this.render(),this.trigger("change",[t])},render:function(){}}),$ns.Field.select=$ns.Field.dropdown={init:function(){this.$input.on("change keyup",function(){this.trigger("change",[this.getValue()])}.bind(this))}},$ns.Field.radio={getValue:function(){var e="";return this.$input.each(function(i,n){n.checked&&(e=t(this).attr("value"))}),e},setValue:function(e){this.$input.each(function(i,n){n.checked=!1,t(n).attr("value")==e&&(n.checked=!0)}),this.render(),this.trigger("change",[e])}},$ns.Field.checkbox={init:function(){this.parentInit(),this.$checkboxes=this.$control.find('input[type="checkbox"]'),this._events={change:function(){var t="";this.$checkboxes.each(function(e,i){i.checked&&(t+=(""!=t?",":"")+i.value)}.bind(this)),this.$input.val(t).trigger("change")}.bind(this)},this.$checkboxes.on("change",this._events.change)},render:function(){var e=this.getValue().split(",");this.$checkboxes.each(function(i,n){t(n).attr("checked",-1!=t.inArray(n.value,e)?"checked":!1)}.bind(this))}},$ns.Field.exploded_textarea={init:function(){this.parentInit(),this.$textarea=this.$control.find("textarea"),this._events={change:function(){var t=this.encode(this.$textarea.val());this.$input.val(t).trigger("change")}.bind(this)},this.$textarea.on("change",this._events.change)},getValue:function(){var t=this.$input.val();return t=t.match(/\n/g)?this.encode(t):t},render:function(){var t=this.decode(this.getValue());this.$textarea.val(t)},encode:function(t){return t.replace(/\n/g,",")},decode:function(t){return t.split(",").join("\n")}},$ns.Field.textarea_safe={init:function(){this.parentInit(),this.$textarea=this.$control.find("textarea"),this._events={change:function(){var t=this.$textarea.val();t=t.match(/"|(http)/)?this.encode(t):t,this.$input.val(t).trigger("change")}.bind(this)},this.$textarea.on("change",this._events.change)},getValue:function(){var t=this.$input.val();return t=t.match(/"|(http)/)&&!t.match(/^#E\-8_/)?this.encode(t):t},render:function(){var t=this.getValue();t=t&&t.match(/^#E\-8_/)?this.decode(t):t,this.$textarea.val(t)},encode:function(t){return"#E-8_"+$ns.fn.base64_encode($ns.fn.rawurlencode(t))},decode:function(t){return $ns.fn.rawurldecode($ns.fn.base64_decode(t.replace(/^#E\-8_/,"")))}},$ns.Field.exploded_textarea_safe={init:function(){this.parentInit(),this.$textarea=this.$control.find("textarea"),this._events={change:function(){var t=this.$textarea.val();t=this.encode(t),this.$input.val(t).trigger("change")}.bind(this)},this.$textarea.on("change",this._events.change)},getValue:function(){var t=this.$input.val();return t=t.match(/\n/g)||t.match(/"|(http)/)&&!t.match(/^#E\-8_/)?this.encode(t):t},render:function(){var t=this.getValue();t=this.decode(t),this.$textarea.val(t)},encode:function(t){return t=t.replace(/\n/g,","),t.match(/"|(http)/)?"#E-8_"+$ns.fn.base64_encode($ns.fn.rawurlencode(t)):t},decode:function(t){return t=t&&t.match(/^#E\-8_/)?$ns.fn.rawurldecode($ns.fn.base64_decode(t.replace(/^#E\-8_/,""))):t,t=t.split(",").join("\n")}},$ns.Field.textarea_raw_html={init:function(){this.parentInit(),this.$textarea=this.$control.find("textarea"),this._events={change:function(){var t=this.$textarea.val();t=this.encode(t),this.$input.val(t).trigger("change")}.bind(this)},this.$textarea.on("change",this._events.change)},getValue:function(){var t=this.$input.val(),e=this.$textarea.val();return t&&t==e&&(t=this.encode(t)),t},render:function(){var t=this.getValue();t=t?this.decode(t):"",this.$textarea.val(t)},encode:function(t){return $ns.fn.base64_encode($ns.fn.rawurlencode(t))},decode:function(t){return $ns.fn.rawurldecode($ns.fn.base64_decode(t.trim()))}},$ns.Field.textarea_html={init:function(){if(void 0===window.tinyMCEPreInit||!this.$control.is(":visible"))return void setTimeout(this.init.bind(this),100);var e=this.$input.attr("id");if(-1==e.indexOf("__i__")){this.$container=this.$control.find(".ns-swysiwyg");var i,n=tinymce.get(e);null!=n&&(i=n.getContent(),n.remove()),this.mceSettings=this.$container[0].onclick()||{},tinyMCEPreInit.mceInit[e]=t.extend(tinyMCEPreInit.mceInit.nootheme||{},this.mceSettings,{selector:"#"+e,setup:function(t){t.on("change",function(){tinymce.get(e).save(),this.$input.trigger("change"),this.$input.val(window.switchEditors.pre_wpautop(t.getContent()))}.bind(this)),t.on("init",function(){i&&t.setContent(i)}),this.$input.on("keyup",function(){t.setContent(window.switchEditors.wpautop(this.$input.val()))}.bind(this)),this.editor=t}.bind(this)}),tinyMCEPreInit.mceInit[e].toolbar1=tinyMCEPreInit.mceInit[e].toolbar1.replace(",nootheme",""),tinymce.init(tinyMCEPreInit.mceInit[e]),tinyMCEPreInit.qtInit[e]={id:e},this.$container.find(".quicktags-toolbar").remove(),quicktags(tinyMCEPreInit.qtInit[e]),QTags._buttonsInit()}},render:function(){if(void 0!==this.editor){var t=this.getValue();this.editor.setContent(t)}}},$ns.Field.colorpicker={init:function(){this.parentInit(),this.changeTimer=null,this._events={change:function(){clearTimeout(this.changeTimer),this.changeTimer=setTimeout(function(){this.$input.trigger("change")}.bind(this),100)}.bind(this)},this.$input.wpColorPicker({change:this._events.change})},render:function(){var t=this.getValue();this.$input.wpColorPicker("color",t)}},$ns.Field.attach_image=$ns.Field.attach_images={init:function(){this.parentInit(),this.$field=this.$control.find(".ns-imgattach"),this.multiple=this.$field.data("multiple"),this.$list=this.$field.find(".ns-imgattach-list"),this.$btnAdd=this.$field.find(".ns-imgattach-add"),this._events={openMediaUploader:this.openMediaUploader.bind(this),deleteImg:function(e){t(e.target).closest("li").remove(),this.updateInput()}.bind(this),updateInput:this.updateInput.bind(this)},this.multiple&&this.$list.sortable({stop:this._events.updateInput}),this.$btnAdd.on("click",this._events.openMediaUploader),this.$list.on("click",".ns-imgattach-delete",this._events.deleteImg)},render:function(){var e=this.getValue(),i={},n=[],s=e?e.split(",").map(Number):[];this.$list.children().toArray().forEach(function(e){var s=t(e),o=parseInt(s.data("id"));i[o]=s,n.push(o)});var o=0;for(o=0;o<s.length;o++){var r=s[o],a=n.indexOf(r,o);if(a!=o){if(-1==a){var h=wp.media.attachment(r);i[r]=this.createItem(h)}else n.splice(a,1);0==o?i[r].prependTo(this.$list):i[r].insertAfter(i[s[o-1]]),n.splice(o,0,r)}}for(;o<n.length;o++)i[n[o]].remove()},updateInput:function(){var t=this.getValue(),e=this.$list.children().toArray().map(function(t){return parseInt(t.getAttribute("data-id"))}),i=e.join(",");i!=t&&this.$input.val(i).trigger("change")},openMediaUploader:function(){void 0===this.frame&&(this.frame=wp.media({title:this.$btnAdd.attr("title"),multiple:this.multiple?"add":!1,library:{type:"image"},button:{text:this.$btnAdd.attr("title")}}),this.frame.on("open",function(){var t=this.getValue(),e=t?t.split(",").map(Number):[],i=this.frame.state().get("selection");e.forEach(function(t){i.add(wp.media.attachment(t))})}.bind(this)),this.frame.on("select",function(){var t=this.getValue(),e=t?t.split(",").map(Number):[],i=this.frame.state().get("selection"),n=[];i.forEach(function(t){t.id&&-1==e.indexOf(t.id)&&this.$list.append(this.createItem(t)),n.push(t.id)}.bind(this)),e.forEach(function(t){-1==n.indexOf(t)&&this.$list.find('[data-id="'+t+'"]').remove()}.bind(this)),this.updateInput()}.bind(this))),this.frame.open()},createItem:function(e){if(!e||!e.attributes.id)return"";var i='<li data-id="'+e.id+'"><a class="ns-imgattach-delete" href="javascript:void(0)">&times;</a><img width="150" height="150" class="attachment-thumbnail" src="';if(void 0!==e.attributes.sizes){var n=void 0!==e.attributes.sizes.thumbnail?"thumbnail":"full";i+=e.attributes.sizes[n].url}i+='"></li>';var s=t(i);return void 0===e.attributes.sizes&&e.fetch({success:function(){var t=void 0!==e.attributes.sizes.thumbnail?"thumbnail":"full";s.find("img").attr("src",e.attributes.sizes[t].url)}.bind(this)}),s}},$ns.Field.params_preset={init:function(){this.parentInit(),this._events={change:function(){this.render()}.bind(this)},this.$input.on("change",this._events.change)},render:function(){var t=this.$input.find("option:selected").data("params");this.setOtherParams(t)},setOtherParams:function(t){var e=this.form;Object.keys(t).forEach(function(i){e.fields[i].setValue(t[i])})}},$ns.Field.vc_link={init:function(){this.$document=t(document),this.$btn=this.$control.find(".ns-linkdialog-btn"),this.$linkUrl=this.$control.find(".ns-linkdialog-url"),this.$linkTitle=this.$control.find(".ns-linkdialog-title"),this.$linkTarget=this.$control.find(".ns-linkdialog-target"),this._events={open:function(){wpLink.open(this.$input.attr("id")),wpLink.textarea=this.$input;var e=this.decodeLink(this.getValue());t("#wp-link-url").val(e.url),t("#wp-link-text").val(e.title),t("#wp-link-target").prop("checked","_blank"==e.target),t("#link-options .vc-link-nofollow").length||($vc_link_nofollow=t('<div class="link-target vc-link-nofollow"><label><span></span> <input type="checkbox" id="vc-link-nofollow"> Add nofollow option to link</label></div>'),$vc_link_nofollow.insertAfter(t("#link-options .link-target"))),t("#vc-link-nofollow").prop("checked","nofollow"==e.rel),t("#wp-link-submit").on("click",this._events.submit),this.$document.on("wplink-close",this._events.close)}.bind(this),submit:function(e){e.preventDefault();var i=t("#wp-link-text").val(),n=wpLink.getAttrs(),s=t("#vc-link-nofollow")[0].checked?"nofollow":"";this.setValue(this.encodeLink(n.href,i,n.target,s)),this.$input.trigger("change"),this._events.close()}.bind(this),close:function(){this.$document.off("wplink-close",this._events.close),t("#wp-link-submit").off("click",this._events.submit),"undefined"!=typeof wpActiveEditor&&(wpActiveEditor=void 0),wpLink.close()}.bind(this)},this.$btn.on("click",this._events.open)},render:function(){for(var t=this.getValue(),e=t.split("|"),i={},n=0;n<e.length;n++){var s=e[n].split(":",2);s.length>1&&(i[s[0]]=decodeURIComponent(s[1]))}this.$linkTitle.text(i.title||""),this.$linkUrl.text(this.shortenUrl(i.url||"")),this.$linkTarget.text(i.target||"")},shortenUrl:function(t){return t.length<=50?t:t.substr(0,20)+"..."+t.substr(t.length-21)},encodeLink:function(t,e,i,n){var s="url:"+encodeURIComponent(t);return e&&(s+="|title:"+encodeURIComponent(e)),i&&(s+="|target:"+encodeURIComponent(i)),n&&(s+="|rel:"+encodeURIComponent(n)),s},decodeLink:function(t){var e=t.split("|"),i={url:"",title:"",target:"",rel:""};return e.forEach(function(t){var e=t.split(":",2);i[e[0]]=decodeURIComponent(e[1]).trim()}),i}},$ns.Field.iconpicker={rendered:!1,render:function(){if(!this.rendered){var e=t.extend({iconsPerPage:64,iconDownClass:"fip-fa fa-arrow-down",iconUpClass:"fip-fa fa-arrow-up",iconLeftClass:"fip-fa fa-arrow-left",iconRightClass:"fip-fa fa-arrow-right",iconSearchClass:"fip-fa fa-search",iconCancelClass:"fip-fa fa-remove",iconBlockClass:"fip-fa"},this.$input.data("settings"));this.$input.fontIconPicker(e),this.rendered=!0}}},$ns.Field.google_fonts={init:function(){this.parentInit(),this.$fontFamily=this.$control.find("select.ns-google_fonts-font_family-select"),this.$fontStyle=this.$control.find("select.ns-google_fonts-font_style-select"),this._events={familyChange:function(){this.renderStyle().trigger("change")}.bind(this),styleChange:function(){var t=this.$fontFamily.val(),e=this.$fontStyle.val();t="string"==typeof t&&0<t.length?"font_family:"+encodeURIComponent(t):"",e="string"==typeof e&&0<e.length?"font_style:"+encodeURIComponent(e):"";var i=""!==t&&""!==e?t+"|"+e:t+e;this.$input.val(i).trigger("change")}.bind(this)},this.$fontFamily.on("change",this._events.familyChange),this.$fontStyle.on("change",this._events.styleChange)},render:function(){for(var t=this.getValue(),e=t.split("|"),i={},n=0;n<e.length;n++){var s=e[n].split(":",2);s.length>1&&(i[s[0]]=decodeURIComponent(s[1]))}this.$fontFamily.val(i.font_family||""),this.renderStyle().val(i.font_style||"")},renderStyle:function(){var t=this.$fontFamily.find(":selected"),e=t.attr("data[font_types]"),i=e.split(","),n="",s=this.$fontFamily.attr("default[font_style]");for(var o in i){var r=i[o].split(":"),a="";"string"==typeof s&&0<s.length&&i[o]==s&&(a="selected"),n=n+"<option "+a+' value="'+i[o]+'" data[font_weight]="'+r[1]+'" data[font_style]="'+r[2]+'">'+r[0]+"</option>"}return this.$fontStyle.html(n)}},$ns.Tabs=function(e){this.$container=t(e),this.$items=this.$container.find(".ns-tabs-item"),this.$sections=this.$container.find(".ns-tabs-section"),this.items=this.$items.toArray().map(t),this.sections=this.$sections.toArray().map(t),this.active=0,this.items.forEach(function(t,e){t.on("click",this.open.bind(this,e))}.bind(this))},t.extend($ns.Tabs.prototype,$ns.mixins.Events,{open:function(t){t!=this.active&&void 0!=this.sections[t]&&(void 0!==this.sections[this.active]&&(this.trigger("beforeHide",[this.active,this.sections[this.active],this.items[this.active]]),this.sections[this.active].hide(),this.items[this.active].removeClass("active"),this.trigger("afterHide",[this.active,this.sections[this.active],this.items[this.active]])),this.trigger("beforeShow",[t,this.sections[t],this.items[t]]),this.sections[t].show(),this.items[t].addClass("active"),this.trigger("afterShow",[t,this.sections[t],this.items[t]]),this.active=t)}}),$ns.Form=function(e){this.$container=t(e),this.$tabs=this.$container.find(".ns-tabs"),this.$tabs.length&&(this.tabs=new $ns.Tabs(this.$tabs)),this.dependency={},this.affects={},this.$fields=this.$container.find(".ns-form-control"),this.fields={},this.$fields.each(function(e,i){var n=t(i),s=n.data("param_name");this.fields[s]=new $ns.Field(n,this),this.fields[s].trigger("beforeShow");var o=n.find(".ns-form-control-dependency");if(o.length){var r=o[0].onclick()||{};void 0!==r.element&&(this.dependency[s]=r,void 0===this.affects[r.element]&&(this.affects[r.element]=[]),this.affects[r.element].push(s))}}.bind(this)),t.each(this.affects,function(t,e){var i=function(){for(var t=0;t<e.length;t++)this.shouldBeVisible(e[t])?this.fields[e[t]].$control.show():this.fields[e[t]].$control.hide(),void 0!==this.dependency[e[t]].callback&&void 0!==window[this.dependency[e[t]].callback]&&window[this.dependency[e[t]].callback]()}.bind(this);this.fields[t].bind("change",i),i()}.bind(this))},t.extend($ns.Form.prototype,{getValue:function(t){return void 0===this.fields[t]?null:this.fields[t].getValue()},setValue:function(t,e){void 0!==this.fields[t]&&this.field[t].setValue(e)},getValues:function(){var e={};return t.each(this.fields,function(t,i){e[t]=i.getValue()}.bind(this)),e},setValues:function(e){t.each(e,function(t,e){void 0!==this.fields[t]&&this.fields[t].setValue(e)}.bind(this))},shouldBeVisible:function(t){if(void 0===this.dependency[t])return!0;var e=this.dependency[t],i=this.fields[e.element].getValue();return void 0!==e.not_empty?void 0!==i&&null!==i&&i.length>0:void 0!==e.value?e.value instanceof Array?-1!=e.value.indexOf(i):i==e.value:!0}}),$ns.ShortcodeList=function(){return void 0!==$ns.shortcodelist?$ns.shortcodelist:(this.$container=t(".ns-shortcode-list"),void(this.$container.length>0&&this.init()))},t.extend($ns.ShortcodeList.prototype,$ns.mixins.Events,{init:function(){this.$closer=this.$container.find(".ns-shortcode-list-closer"),this.$list=this.$container.find(".ns-shortcode-list-list"),this._events={select:function(e){var i=t(e.target).closest(".ns-shortcode-list-item");this.hide(),this.trigger("select",[i.data("name")])}.bind(this),hide:this.hide.bind(this)},this.$closer.on("click",this._events.hide),this.$list.on("click",".ns-shortcode-list-item",this._events.select)},show:function(){return 0==this.$container.length?void t.ajax({type:"post",url:$ns.ajaxUrl,data:{action:"ns_get_shortcode_list_html"},success:function(e){this.$container=t(e).css("display","none").appendTo(t(document.body)),this.init(),this.show()}.bind(this)}):(this.trigger("beforeShow"),this.$container.css("display","block"),void this.trigger("afterShow"))},hide:function(){this.trigger("beforeHide"),this.$container.css("display","none"),this.trigger("afterHide")},load:function(){return 0==this.$container.length?void t.ajax({type:"post",url:$ns.ajaxUrl,data:{action:"ns_get_shortcode_list_html"},success:function(e){this.$container=t(e).css("display","none").appendTo(t(document.body)),this.init(),$ns.builder.load()}.bind(this)}):void 0}}),$ns.shortcodelist=new $ns.ShortcodeList,setTimeout(function(){$ns.shortcodelist.load()},1e4),$ns.Builder=function(){this.$container=t(".ns-builder"),0!=this.$container.length&&this.init()},t.extend($ns.Builder.prototype,$ns.mixins.Events,{init:function(){this.$title=this.$container.find(".ns-builder-title"),this.titles=this.$title[0].onclick()||{},this.$title.removeAttr("onclick"),this.$closer=this.$container.find(".ns-builder-closer, .ns-builder-btn.for_close"),this.$forms={},this.forms={},this.defaults={},this.$container.find(".ns-form").each(function(e,i){var n=t(i).css("display","none"),s=n.data("shortcode");this.$forms[s]=n}.bind(this)),this.$btnSave=this.$container.find(".ns-builder-btn.for_save"),this.active=!1,this._events={hide:this.hide.bind(this),save:this.save.bind(this)},this.$closer.on("click",this._events.hide),this.$btnSave.on("click",this._events.save)},show:function(e,i){if(0==this.$container.length)return void t.ajax({type:"post",url:$ns.ajaxUrl,data:{action:"ns_get_builder_html"},success:function(n){""!=n&&(n=$ns.fn.enqueueAssets(n),this.$container=t(n).css("display","none").appendTo(t(document.body)),this.init(),this.show(e,i))}.bind(this)});if(void 0===this.forms[e]){if(void 0===this.$forms[e])return;this.forms[e]=new $ns.Form(this.$forms[e]),this.defaults[e]=this.forms[e].getValues()}i=t.extend({},this.defaults[e],i),this.forms[e].setValues(i),void 0!==this.forms[e].tabs&&this.forms[e].tabs.open(0),this.$forms[e].css("display","block"),this.$title.html(this.titles[e]||""),this.active=e,this.trigger("beforeShow"),this.$container.css("display","block"),this.trigger("afterShow")},hide:function(){this.trigger("beforeHide"),this.$container.css("display","none"),void 0!==this.$forms[this.active]&&this.$forms[this.active].css("display","none"),this.trigger("afterHide")},load:function(){return 0==this.$container.length?void t.ajax({type:"post",url:$ns.ajaxUrl,data:{action:"ns_get_builder_html"},success:function(e){""!=e&&(e=$ns.fn.enqueueAssets(e),this.$container=t(e).css("display","none").appendTo(t(document.body)),this.init())}.bind(this)}):void 0},getValues:function(){return void 0!==this.forms[this.active]?this.forms[this.active].getValues():{}},getDefaults:function(){return this.defaults[this.active]||{}},save:function(){this.hide(),this.trigger("save",[this.getValues(),this.getDefaults()])}}),$ns.builder=new $ns.Builder}(jQuery),!function(t){void 0===$ns.fn&&($ns.fn={}),$ns.fn.shortcodeParseAtts=function(t){t=t.replace(/\<br \/\> /g,"\n");var e={};return t.replace(/([a-z0-9_\-]+)=\"([^\"\]]*)"/g,function(t,i,n){e[i]=n}),e},$ns.fn.generateShortcode=function(e,i,n){var s="["+e,o=$ns.elements[e]&&$ns.elements[e].params.content&&"html"==$ns.elements[e].params.content.type;return i=i||{},n=n||{},t.each(i,function(t,e){o&&"content"==t||void 0!==n[t]&&n[t]!==e&&(s+=" "+t+'="'+e+'"')}),s+="]",o&&(s+=(i.content||"")+"[/"+e+"]"),s},$ns.fn.handleShortcodeCall=function(t,e,i){"string"!=typeof t&&(t=""),-1==e&&(e=0),-1==i&&(i=e),e>i&&(i=e+(e=i)-i),i>e&&"]"==t[i-1]&&i--;var n=t.lastIndexOf("[",i-1),s=t.lastIndexOf("]",i-1),o=t.indexOf("[",i),r=t.indexOf("]",i),a={action:"insert",selection:[e,i]};if(-1==n||-1==r||s>n||-1!=o&&r>o)return a;a.selection=[r+1,r+1];var h="/"!=t.charAt(n+1),c={action:"edit",shortcode:t.substring(n+(h?1:2),r+1).replace(/^([a-zA-Z0-9\-\_]+)[^\[]+/,"$1")};if(void 0===$ns.elements[c.shortcode])return a;var l,d=1,f=new RegExp("\\[(\\/?)"+c.shortcode.replace(/\-/g,"\\$&")+"((?=\\])| [^\\]]+)","ig");if(h){for(c.values=$ns.fn.shortcodeParseAtts(t.substring(n,r+1)),f.lastIndex=r;l=f.exec(t);)if(d+=l[1]?-1:1,0==d){c.selection=[n,t.indexOf("]",f.lastIndex-l[0].length+1)+1],c.values.content=t.substring(r+1,f.lastIndex-l[0].length);break}0!=d&&(c.selection=[n,r+1])}else{for(var u=[],p=[];(l=f.exec(t))&&!(f.lastIndex>=n);)u.push(l[1]?1:-1),p.push(f.lastIndex-l[0].length);for(var $=u.length-1;$>=0;$--)if(d+=u[$],0==d){var v=t.indexOf("]",p[$]);c.selection=[p[$],r+1],c.values=$ns.fn.shortcodeParseAtts(t.substring(p[$],v)),c.values.content=t.substring(v+1,n);break}if(0!=d)return a}return c},$ns.fn.enqueueAssets=function(e){var i,n=/(\<link rel=\'stylesheet\' id=\'([^\']+)\'[^\>]+?\>)|(\<style type\=\"text\/css\"\>([^\<]*)\<\/style\>)|(\<script type=\'text\/javascript\' src=\'([^\']+)\'\><\/script\>)|(\<script type\=\'text\/javascript\'\>([^`]*?)\<\/script\>)/g,s=t(document.head),o=t("style"),r=t("script[src]"),a=t("script:not([src])");return e.replace(n,function(e,n,h,c,l,d,f,u,p){if(0==e.indexOf("<link rel='stylesheet'")){if(0!=t('link[rel="stylesheet"]#'+h).length)return""}else if(0==e.indexOf("<style")){for(l=l.trim(),i=0;i<o.length;i++)if(o[i].innerHTML.trim()==l)return""}else if(0==e.indexOf("<script type='text/javascript' src='")){for(f=f.replace(/&_=[0-9]+/,""),i=0;i<r.length;i++)if(0===r[i].src.indexOf(f))return""}else for(p=p.trim(),i=0;i<a.length;i++)if(a[i].innerHTML.trim()==p)return"";return t(e).appendTo(s),""})},$ns.fn.rawurldecode=function(t){return decodeURIComponent(t+"")},$ns.fn.rawurlencode=function(t){return t=(t+"").toString(),encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},$ns.fn.utf8_decode=function(t){var e=[],i=0,n=0,s=0,o=0,r=0;for(t+="";i<t.length;)s=t.charCodeAt(i),128>s?(e[n++]=String.fromCharCode(s),i++):s>191&&224>s?(o=t.charCodeAt(i+1),e[n++]=String.fromCharCode((31&s)<<6|63&o),i+=2):(o=t.charCodeAt(i+1),r=t.charCodeAt(i+2),e[n++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&r),i+=3);return e.join("")},$ns.fn.utf8_encode=function(t){if(null===t||"undefined"==typeof t)return"";var e,i,n=t+"",s="",o=0;e=i=0,o=n.length;for(var r=0;o>r;r++){var a=n.charCodeAt(r),h=null;128>a?i++:h=a>127&&2048>a?String.fromCharCode(a>>6|192)+String.fromCharCode(63&a|128):String.fromCharCode(a>>12|224)+String.fromCharCode(a>>6&63|128)+String.fromCharCode(63&a|128),null!==h&&(i>e&&(s+=n.slice(e,i)),s+=h,e=i=r+1)}return i>e&&(s+=n.slice(e,o)),s},$ns.fn.base64_decode=function(t){var e,i,n,s,o,r,a,h,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,d=0,f="",u=[];if(!t)return t;t+="";do s=c.indexOf(t.charAt(l++)),o=c.indexOf(t.charAt(l++)),r=c.indexOf(t.charAt(l++)),a=c.indexOf(t.charAt(l++)),h=s<<18|o<<12|r<<6|a,e=h>>16&255,i=h>>8&255,n=255&h,64==r?u[d++]=String.fromCharCode(e):64==a?u[d++]=String.fromCharCode(e,i):u[d++]=String.fromCharCode(e,i,n);while(l<t.length);return f=u.join(""),f=$ns.fn.utf8_decode(f)},$ns.fn.base64_encode=function(t){var e,i,n,s,o,r,a,h,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,d=0,f="",u=[];if(!t)return t;t=$ns.fn.utf8_encode(t+"");do e=t.charCodeAt(l++),i=t.charCodeAt(l++),n=t.charCodeAt(l++),h=e<<16|i<<8|n,s=h>>18&63,o=h>>12&63,r=h>>6&63,a=63&h,u[d++]=c.charAt(s)+c.charAt(o)+c.charAt(r)+c.charAt(a);while(l<t.length);f=u.join("");var p=t.length%3;return(p?f.slice(0,p-3):f)+"===".slice(p||3)}}(jQuery);
