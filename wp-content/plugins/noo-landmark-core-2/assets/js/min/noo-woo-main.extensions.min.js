!function(e,o){var a={setup_var:function(){a.els={},a.vars={},a.tpl={},a.els.images=e(".noo-woo-images"),a.els.images_wrap=e(".noo-woo-images-wrap"),a.els.thumbnails=e(".noo-woo-thumbnails"),a.els.thumbnails_wrap=e(".noo-woo-thumbnails-wrap"),a.els.variations_form=e("form.variations_form"),a.els.all_images_wrap=e(".noo-woo-all-images-wrap"),a.els.variation_id_field=a.els.variations_form.find("input[name=variation_id]"),a.els.gallery=!1,a.vars.is_dragging_image_slide=!1,a.vars.images_slider_data=!1,a.vars.thumbnails_slider_data=!1,a.vars.loading_class="noo-woo-loading",a.vars.reset_class="noo-woo-reset",a.vars.thumbnails_active_class="noo-woo-thumbnails__slide--active",a.vars.thumbnails_count=e("body").hasClass("page-fullwidth")?5:4,a.vars.images_active_class="noo-woo-images__slide--active",a.vars.is_touch_device=!!("ontouchstart"in window),a.vars.variations_json=a.els.variations_form.attr("data-product_variations"),a.vars.variations=a.vars.variations_json?e.parseJSON(a.vars.variations_json):!1,a.vars.product_id=a.els.variations_form.data("product_id"),a.vars.show_variation_trigger="noo_woo_show_variation",a.vars.loading_variation_trigger="noo_woo_loading_variation",a.vars.default_images=e.parseJSON(a.els.all_images_wrap.attr("data-default")),a.tpl.temp_images_container='<div class="noo-woo-temp"><div class="noo-woo-temp__images"/><div class="noo-woo-icon noo-woo-temp__thumbnails"/></div>',a.tpl.image_slide='<div class="noo-woo-images__slide {{slide_class}}"><img class="noo-woo-images__image" src="{{image_src}}" data-srcset="{{image_src}}{{image_src_retina}}" data-large-image="{{large_image_src}}" data-large-image-width="{{large_image_width}}" data-large-image-height="{{large_image_height}}" width="{{image_width}}" height="{{image_height}}" title="{{title}}" alt="{{alt}}"></div>',a.tpl.thumbnail_slide='<div class="noo-woo-thumbnails__slide {{slide_class}}" data-index="{{index}}"><img class="noo-woo-thumbnails__image" src="{{image_src}}" data-srcset="{{image_src}}{{image_src_retina}}" title="{{title}}" alt="{{alt}}" width="{{image_width}}" height="{{image_height}}"></div>',a.tpl.retina_img_src=", {{image_src}} 2x"},lazy_load_images:function(){var o=e("img");o.length>0&&o.each(function(o,a){var t=e(a),s=t.attr("data-noo-woo-src");if("undefined"!=typeof s){var n=t.clone();n.attr("src",s).css({paddingTop:"",height:""}),t.replaceWith(n)}})},images_slider_args:function(){return{mode:"horizontal",speed:250,controls:a.els.images.children().length>1?!0:!1,infiniteLoop:a.els.images.children().length>1?!0:!1,adaptiveHeight:!0,pager:!1,prevText:'<i class="icon ion-ios-arrow-back"></i>',nextText:'<i class="icon ion-ios-arrow-forward"></i>',onSliderLoad:function(){a.setup_srcset(),this.getSlideCount()<=1&&a.els.images_wrap.find(".bx-controls").hide()},onSlideBefore:function(o,t,s){a.go_to_thumbnail(s),e("."+a.vars.images_active_class).removeClass(a.vars.images_active_class),o.addClass(a.vars.images_active_class)}}},thumbnails_slider_args:function(){return{mode:"horizontal",infiniteLoop:!1,speed:250,minSlides:parseInt(a.vars.thumbnails_count),maxSlides:parseInt(a.vars.thumbnails_count),slideWidth:800,moveSlides:1,pager:!1,controls:!1,slideMargin:0,onSliderLoad:function(){a.setup_srcset(),a.els.thumbnails_wrap.css({opacity:1,height:"auto"}),a.set_thumbnail_controls_visibility(this)},onSlideAfter:function(){a.set_thumbnail_controls_visibility(this)}}},setup_sliders:function(){a.els.images.imagesLoaded(function(){a.vars.images_slider_data=a.els.images.bxSlider(a.images_slider_args()),a.lazy_load_images()}),a.els.thumbnails.length>0&&(a.els.thumbnails.imagesLoaded(function(){a.vars.thumbnails_slider_data=a.els.thumbnails.bxSlider(a.thumbnails_slider_args())}),e(o).on("click",".noo-woo-thumbnails__control",function(){if(!a.els.all_images_wrap.hasClass(a.vars.loading_class)){var o=e(this).attr("data-direction");"next"===o?a.vars.thumbnails_slider_data.goToNextSlide():a.vars.thumbnails_slider_data.goToPrevSlide()}})),e(o).on("click",".noo-woo-thumbnails__slide",function(){if(!a.els.all_images_wrap.hasClass(a.vars.loading_class)){var o=parseInt(e(this).attr("data-index"));a.set_active_thumbnail(o),a.vars.images_slider_data.goToSlide(o)}})},set_thumbnail_controls_visibility:function(o){var t=a.get_last_thumbnail_index(),s=o.getCurrentSlide(),n=e(".noo-woo-thumbnails__control--right, .noo-woo-thumbnails__control--down"),i=e(".noo-woo-thumbnails__control--left, .noo-woo-thumbnails__control--up");return o.getSlideCount()<=1||o.getSlideCount()<=parseInt(a.vars.thumbnails_count)?void e(".noo-woo-thumbnails__control").hide():void(0===s?(n.show(),i.hide()):s===t?(n.hide(),i.show()):e(".noo-woo-thumbnails__control").show())},set_active_thumbnail:function(o){e(".noo-woo-thumbnails__slide").removeClass(a.vars.thumbnails_active_class),e(".noo-woo-thumbnails__slide[data-index="+o+"]").addClass(a.vars.thumbnails_active_class)},go_to_thumbnail:function(e){if(a.vars.thumbnails_slider_data){var o=a.get_thumbnail_index(e);a.vars.thumbnails_slider_data.goToSlide(o)}a.set_active_thumbnail(e)},get_thumbnail_index:function(e){if(1===parseInt(a.vars.thumbnails_count))return e;var o=a.get_last_thumbnail_index(),t=e>o?o:0===e?0:e-1;return t},get_last_thumbnail_index:function(){var e=a.els.thumbnails.children().length,o=e-a.vars.thumbnails_count;return o},watch_variations:function(){a.els.variation_id_field.on("change",function(){var o=parseInt(e(this).val()),t=parseInt(a.els.all_images_wrap.attr("data-showing"));isNaN(o)||o===t||a.get_variation_data(o),isNaN(o)&&setTimeout(function(){""===a.els.variation_id_field.val()&&t!==a.vars.product_id&&a.reset_images()},250)}),e(o).on(a.vars.loading_variation_trigger,function(){a.els.all_images_wrap.addClass(a.vars.loading_class)}),e(o).on(a.vars.show_variation_trigger,function(e,o){a.load_images(o)}),e(o).on("change",'.noo_variations input[type="checkbox"]',function(){$input=e(this),$pa_item=$input.closest(".pa_item"),$attribute=$pa_item.attr("data-attribute_name"),$pa_item.find('input[type="checkbox"]').not(this).prop("checked",!1),$input.prop("checked")&&e("table.variations select#"+$attribute).val($input.val()).change()}),e(o).on("click",".reset_variations",function(){$noo_variations=e(".noo_variations"),$noo_variations.find('input[type="checkbox"]').prop("checked",!1)})},load_images:function(t){if(t&&(a.els.all_images_wrap.attr("data-showing",t.variation_id),t.other_images)){var s=t.other_images.length;s>0&&(a.els.all_images_wrap.removeClass(a.vars.reset_class),a.els.thumbnails_wrap.removeClass(function(e,o){return(o.match(/\bnumber-\S+/g)||[]).join(" ")}),a.els.thumbnails_wrap.addClass("number-"+s),a.replace_images(t.other_images,function(){e(o).trigger("noo_woo_images_loaded",[t])}))}},replace_images:function(e,o){var t=a.create_temporary_images(e);t.container.imagesLoaded(function(){a.els.images.html(t.images.html()),a.els.thumbnails.html(t.thumbnails.html()),a.vars.images_slider_data&&a.vars.images_slider_data.reloadSlider(a.images_slider_args()),a.vars.thumbnails_slider_data&&a.vars.thumbnails_slider_data.reloadSlider(a.thumbnails_slider_args()),t.container.remove(),a.els.all_images_wrap.removeClass(a.vars.loading_class),void 0!==o&&o()})},prepare_retina_srcset:function(e){return a.tpl.retina_img_src.replace("{{image_src}}",e)},setup_srcset:function(){e("[data-srcset]").each(function(){e(this).attr("srcset",e(this).attr("data-srcset")).removeAttr("data-srcset")})},create_temporary_images:function(o){e("body").append(a.tpl.temp_images_container);var t=o.length,s={container:e(".noo-woo-temp"),images:e(".noo-woo-temp__images"),thumbnails:e(".noo-woo-temp__thumbnails")};if(e.each(o,function(e,o){var n="undefined"!=typeof o.single.retina?!0:!1,i="undefined"!=typeof o.thumb.retina?!0:!1,r=a.tpl.image_slide.replace(/{{image_src}}/g,o.single[0]).replace(/{{image_src_retina}}/g,n?a.prepare_retina_srcset(o.single.retina[0]):"").replace("{{large_image_src}}",o.large[0]).replace("{{large_image_width}}",o.large[1]).replace("{{large_image_height}}",o.large[2]).replace("{{image_width}}",o.single[1]).replace("{{image_height}}",o.single[2]).replace("{{alt}}",o.alt).replace("{{title}}",o.title).replace("{{slide_class}}",0===e?a.vars.images_active_class:"");if(s.images.append(r),t>1){var l=a.tpl.thumbnail_slide.replace(/{{image_src}}/g,o.thumb[0]).replace(/{{image_src_retina}}/g,i?a.prepare_retina_srcset(o.thumb.retina[0]):"").replace("{{index}}",e).replace("{{image_width}}",o.thumb[1]).replace("{{image_height}}",o.thumb[2]).replace("{{alt}}",o.alt).replace("{{title}}",o.title).replace("{{slide_class}}",0===e?a.vars.thumbnails_active_class:"");s.thumbnails.append(l)}}),1!==t&&t<a.vars.thumbnails_count){var n=a.vars.thumbnails_count-t;for(i=0;i<n;)s.thumbnails.append("<div/>"),i++}return s},reset_images:function(){a.els.all_images_wrap.hasClass(a.vars.reset_class)||a.els.all_images_wrap.hasClass(a.vars.loading_class)||(e(o).trigger(a.vars.loading_variation_trigger),a.els.all_images_wrap.attr("data-showing",a.vars.product_id),a.els.all_images_wrap.addClass(a.vars.reset_class),a.replace_images(a.vars.default_images))},get_variation_data:function(t){e(o).trigger(a.vars.loading_variation_trigger);var s=!1;a.vars.variations?(e.each(a.vars.variations,function(e,o){o.variation_id===t&&(s=o)}),e(o).trigger(a.vars.show_variation_trigger,[s])):e.ajax({type:"GET",url:nooWooVars.ajaxurl,cache:!1,dataType:"jsonp",crossDomain:!0,data:{action:"noo_woo_get_variation",variation_id:t,product_id:a.vars.product_id},success:function(t){t.success&&t.variation&&(s=t.variation,e(o).trigger(a.vars.show_variation_trigger,[s]))}})},setup_fullscreen:function(){e(o).on("click",".noo-woo-images__slide",function(){var o=e(".noo-woo-pswp")[0],t=a.get_gallery_items(),s={index:t.index,shareEl:!1,closeOnScroll:!1,history:!1};a.els.gallery=new PhotoSwipe(o,PhotoSwipeUI_Default,t.items,s),a.els.gallery.init()})},get_gallery_items:function(){var o=a.els.images.children().not(".bx-clone"),t=[],s=o.filter("."+a.vars.images_active_class).index();return s-=1,o.length>0&&o.each(function(o,a){var s=e(a).find("img"),n=s.attr("data-large-image"),i=s.attr("data-large-image-width"),r=s.attr("data-large-image-height"),l={src:n,w:i,h:r};t.push(l)}),{index:s,items:t}},init:function(){a.setup_var(),a.setup_sliders(),a.watch_variations(),a.setup_fullscreen()}};e(window).load(a.init())}(jQuery,document);
