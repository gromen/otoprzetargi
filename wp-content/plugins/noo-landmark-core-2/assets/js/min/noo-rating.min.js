!function(){"use strict";jQuery(document).ready(function(e){e(".noo-property-comment").length>0&&e(".noo-property-comment").each(function(){var n=e(this);n.find(".noo-loadmore-comment").on("click","span",function(n){n.preventDefault();var o=e(this),a=o.data("number-comment"),t=o.data("total-comment"),r=o.data("curent-page"),i=o.data("max-page"),d=o.data("property-id"),s={action:"noo_property_loadmore_comment",security:Noo_Rating.security,number_comment:a,total_comment:t,max_page:i,curent_page:r,property_id:d};e.ajax({url:Noo_Rating.ajax_url,type:"POST",dataType:"html",data:s,beforeSend:function(){o.closest(".noo-loadmore-comment").addClass("loadmore").find("> span > i").removeClass("ion-chevron-down").addClass("fa fa-spinner fa-spin")},success:function(n){n=e.parseJSON(n),n.end_comment?o.closest(".noo-loadmore-comment").hide():(o.closest(".noo-property-comment").find(".noo-property-list-comment").append(n.html).fadeIn("slow"),o.closest(".noo-loadmore-comment").removeClass("loadmore").find("> span > i").removeClass("fa fa-spinner fa-spin").addClass("ion-chevron-down"),o.data("curent-page",n.curent_page))}})}),n.find(".noo-property-form-comment-wrap").on("click","button",function(o){o.preventDefault();var a=e(this),t=n.find(".noo-property-form-comment-wrap").serializeArray();t.push({name:"action",value:"noo_submit_comment"},{name:"security",value:Noo_Rating.security}),n.find(".noo-property-form-item").removeClass("validate-error");var r=n.find('[name="user_name"]').val(),i=n.find('[name="user_email"]').val(),d=n.find('[name="user_msg"]').val(),s=n.find('[name="rating"]:checked').val(),m=!1;return"undefined"!=typeof r&&""!==r||(n.find(".user_name").addClass("validate-error"),m=!0),"undefined"!=typeof i&&""!==i||(n.find(".user_email").addClass("validate-error"),m=!0),"undefined"!=typeof d&&""!==d||(n.find(".user_msg").addClass("validate-error"),m=!0),"undefined"!=typeof s&&""!==s||(n.find(".rating").addClass("validate-error"),m=!0),!m&&void e.ajax({url:Noo_Rating.ajax_url,type:"POST",dataType:"html",data:t,beforeSend:function(){a.find(">i").removeClass("hide"),a.find(".noo-property-notice").remove(),a.find(".none-comment").remove()},success:function(o){o=e.parseJSON(o),a.find(">i").addClass("success").removeClass("fa-spin"),n.find(".noo-property-list-comment").find(".none-comment").remove(),n.find(".noo-property-list-comment").prepend(o.html).fadeIn("slow"),setTimeout(function(){a.find(">i").removeClass("success").addClass("hide fa-spin")},5e3)}})})})})}(jQuery);