!function(a){"use strict";a(document).ready(function(a){if(a(".noo-add-toggle").click(function(){return a(this).closest(".noo-add-parent").toggleClass("wp-hidden-children"),!1}),a("input[name=noo-membership-packages-properties_num_unlimited]").click(function(){a(this).is(":checked")?a("input[name=noo-membership-packages-properties_num").prop("disabled",!0):a("input[name=noo-membership-packages-properties_num").prop("disabled",!1)}),a("#noo-membership-packages-add-submit").click(function(){var b=a("#noo-membership-packages-add"),c=b.find("#noo-membership-packages-title:input").val();if(""===c)return void b.find("#noo-membership-packages-title:input").focus();var d=b.find("#noo-membership-packages-interval:input").val();if(""===d)return void b.find("#noo-membership-packages-interval:input").focus();var e=b.find("#noo-membership-packages-interval_unit option:selected").val();if(""===e)return void b.find("#noo-membership-packages-interval_unit:input").focus();var f=b.find("#noo-membership-packages-price:input").val();if(""===f)return void b.find("#noo-membership-packages-price:input").focus();var g=b.find("#noo-membership-packages-properties_num:input").val(),h=b.find("#noo-membership-packages-properties_num_unlimited:input").is(":checked");if(""===g&&!h)return void b.find("#noo-membership-packages-properties_num:input").focus();var i=b.find("#noo-membership-packages-featured_num:input").val();if(""===i)return void b.find("#noo-membership-packages-featured_num:input").focus();var j={action:"noo_create_membership",security:Noo_MemberShip_Admin.security,title:c,interval:d,interval_unit:e,price:f,properties_num:g,properties_num_unlimited:h?"1":"0",featured_num:i};a.post(ajaxurl,j,function(d){if("success"!==d.status)return!1;var e=a("#noo-membership-packages-add").closest(".noo-form-group").find(".noo_package_select");e.find("option:selected").attr("selected",""),e.append(a("<option/>").val(d.package_id).text(c).attr("selected","selected")),b.find("#noo-membership-packages-title:input").val(""),b.find("#noo-membership-packages-interval:input").val(""),b.find("#noo-membership-packages-interval_unit option:selected").attr("selected",""),b.find("#noo-membership-packages-interval_unit option:first-child").attr("selected","selected"),b.find("#noo-membership-packages-price:input").val(""),b.find("#noo-membership-packages-properties_num:input").val(""),b.find("#noo-membership-packages-properties_num_unlimited:input").attr("checked",!1),b.find("#noo-membership-packages-featured_num:input").val("")})}),a(".add_membership_add_info").click(function(){var b=a(this),c=b.siblings(".noo-membership-additional"),d=c.attr("data-max"),e=c.attr("data-name"),f=c.find(".additional-field").length;return f>=d?void b.attr("disabled","disabled"):(f++,c.append(a('<div class="additional-field"></div>').append('<input type="text" value="" name="noo_meta_boxes['+e+"_"+f+']" style="max-width:350px;padding-right: 10px;display: inline-block;float: left;" />').append('<input class="button button-secondary delete_membership_add_info" type="button" value="Delete" style="display: inline-block;float: left;" />').append("<br/>")),void(f>=d&&b.attr("disabled","disabled")))}),a(".noo-membership-additional").on("click",".delete_membership_add_info",function(){var b=a(this),c=b.parents(".noo-membership-additional"),d=c.attr("data-max"),e=c.attr("data-name"),f=c.find(".additional-field").length;b.parent(".additional-field").remove(),f--,f<d&&b.removeAttr("disabled");var g=1;c.find(".additional-field").each(function(){a(this).find("input[type=text]").attr("name","noo_meta_boxes["+e+"_"+g+"]"),g++})}),a(".box-membership-type").length>0){var b=a(".box-membership-type").find('input[name="membership_type"]:checked').val();a(".membership_type").each(function(c,d){a(this).hasClass("type_"+b)?a(this).show():a(this).hide()}),a(".box-membership-type").find('input[name="membership_type"]').change(function(){var b=this.value;a(".membership_type").each(function(c,d){a(this).hasClass("type_"+b)?a(this).show():a(this).hide()})});var c=a(".box-free-membership").find('input[name="membership_freemium"]:checked').val();a(".enable_free_membership").each(function(b,d){c&&a(this).hasClass("membership_freemium")?a(this).show():a(this).hide()}),a(".box-free-membership").find('input[name="membership_freemium"]').change(function(){var b=a(this).prop("checked");a(".enable_free_membership").each(function(c,d){b&&a(this).hasClass("membership_freemium")?a(this).show():a(this).hide()})})}if(a(".box-payment-type").length>0){var d=a(".box-payment-type").find('input[name="payment_type"]:checked').val();a(".payment_type").each(function(b,c){a(this).hasClass("type_"+d)?a(this).show():a(this).hide()}),a(".box-payment-type").find('input[name="payment_type"]').change(function(){var b=this.value;a(".payment_type").each(function(c,d){a(this).hasClass("type_"+b)?a(this).show():a(this).hide()})})}})}(jQuery);