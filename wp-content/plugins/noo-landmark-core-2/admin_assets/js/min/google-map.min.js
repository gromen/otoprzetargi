!function(e){"use strict";e(".rp-gmap").length>0&&e(".rp-gmap").each(function(){function o(){(i=new google.maps.Map(document.getElementById(p),{flat:!1,noClear:!1,zoom:y,scrollwheel:!1,draggable:d,disableDefaultUI:!1,center:new google.maps.LatLng(w,k),mapTypeId:google.maps.MapTypeId.ROADMAP})).setZoom(y),google.maps.visualRefresh=!0;var e=new google.maps.LatLng(w,k);a(i,e);var o=new google.maps.InfoWindow,t=new google.maps.Marker({map:i,anchorPoint:new google.maps.Point(0,0)}),n={content:document.createElement("div"),disableAutoPan:!0,maxWidth:500,boxClass:"rp-property-item-map-wrap",zIndex:null,infoBoxClearance:new google.maps.Size(1,1),isHidden:!1,pane:"floatPane",enableEventPropagation:!1};if(l=new InfoBox(n),M){var s=document.getElementById("rp-field-item-address");if(void 0!==s&&""!==s&&null!==s){var c={types:[C]},g=new google.maps.places.Autocomplete(s,c);"all"===N?g.setComponentRestrictions([]):g.setComponentRestrictions({country:N}),g.bindTo("bounds",i),g.addListener("place_changed",function(){o.close(),t.setVisible(!1);var e=g.getPlace();if(e.geometry){e.geometry.viewport?i.fitBounds(e.geometry.viewport):i.setCenter(e.geometry.location),t.setPosition(e.geometry.location),t.setVisible(!0);e.address_components&&r(i,e.geometry.location,!0)}else window.alert("Autocomplete's returned place contains no geometry")})}}google.maps.event.addListener(i,"click",function(e){l.close(),r(i,e.latLng,!0)})}function a(e,o){t(),r(e,o,!1)}function t(){for(var e=0;e<I.length;e++)I[e].setMap(null);I=[]}function r(o,a,r){var i=new google.maps.Geocoder;t(),i.geocode({location:a},function(t,i){if("OK"===i)if(t[1]){var s=new Marker({position:a,map:o,icon:{path:MAP_PIN,fillColor:Noo_Map.background_map,fillOpacity:1,strokeColor:"",strokeWeight:0},map_icon_label:'<span class="noo-icon-map fa fa-home" style="color: '+Noo_Map.background_map+'"></span>'});I.push(s);var p=new google.maps.LatLngBounds;if(p.extend(a),o.fitBounds(p),o.setZoom(y),void 0!==c){var d={url:g,title:m,image:u,rp_property_area:_,rp_property_bedrooms:v,rp_property_bathrooms:f,rp_property_garages:h,price_html:b};l.setContent(n(d))}else l.setContent("<strong>Latitude:</strong> "+a.lat()+"<br /><strong>Longitude:</strong> "+a.lng());if(l.open(o,s),!r)return;var w=t[1].address_components,k=!1,M=!1,N=!1,C=!1;e.each(w,function(o,a){if(void 0!==a.types[0])switch(a.types[0]){case"country":e("option[value="+a.short_name+"]").attr("selected",!0);break;case"locality":e("#rp-field-item-city").val(a.long_name),k=!0;break;case"neighborhood":e("#rp-field-item-neighborhood").val(a.long_name),M=!0;break;case"postal_code":e("#rp-field-item-zip").val(a.long_name),N=!0;break;case"administrative_area_level_1":e("#rp-field-item-state").val(a.long_name),C=!0}}),k||e("#rp-field-item-city").val(""),M||e("#rp-field-item-neighborhood").val(""),C||e("#rp-field-item-state").val(""),N||e("#rp-field-item-zip").val(""),e("#rp-field-item-latitude").val(a.lat()),e("#rp-field-item-longitude").val(a.lng())}else window.alert(Noo_Map.no_results);else window.alert(Noo_Map.geo_fail+i)})}function n(e){return'<div class="rp-property-item-map"><div class="rp-thumbnail"><a target="_blank" href="'+e.url+'" title="'+e.title+'"><img src="'+e.image+'" alt="'+e.title+'" /></a></div><div class="rp-content"><h4 class="rp-content-title"><a target="_blank" href="'+e.url+'" title="'+e.title+'">'+e.title+'</a></h4><div class="rp-info"><span class="rp-area"><i class="rp-icon-ruler"></i>'+e.rp_property_area+'</span><span class="rp-bed"><i class="rp-icon-bed"></i>'+e.rp_property_bedrooms+'</span><span class="rp-bath"><i class="rp-icon-bath"></i>'+e.rp_property_bathrooms+'</span><span class="rp-storage"><i class="rp-icon-garage"></i>'+e.rp_property_garages+'</span></div><div class="rp-action"><div class="rp-price">'+e.price_html+'</div><a class="more" target="_blank" href="'+e.url+'" title="'+e.title+'"><i class="rp-icon-plus" aria-hidden="true"></i></a></div></div></div><!-- /.rp-property-item-map -->'}var l,i,s=e(this),p=s.data("id"),c=s.data("property_id"),d=s.data("drag_map")||!0,g=(s.data("fitbounds"),s.data("url")),m=s.data("title"),u=s.data("image"),_=s.data("area"),f=s.data("bathrooms"),v=s.data("bedrooms"),h=s.data("garages"),b=s.data("price_html"),y=parseInt(Noo_Map.zoom),w=parseFloat(Noo_Map.lat),k=parseFloat(Noo_Map.lng),M=Noo_Map.enable_auto_complete,N=Noo_Map.country_restriction,C=Noo_Map.location_type,I=[],L=e("#latitude").val(),P=e("#longitude").val();void 0!==L&&""!==L&&(w=L),void 0!==P&&""!==P&&(k=P),e(".noo-sw-section").length>0&&"undefined"!==e.cookie&&(null!=e.cookie("noo-selector-color")&&(Noo_Map.background_map=e.cookie("noo-selector-color")),e(document).bind("noo-color-changed",function(){var o=null!=e.cookie("noo-selector-color")?e.cookie("noo-selector-color"):"#114a82";if(null!=e.cookie("noo-selector-color"))for(var a=0;a<I.length;a++)I[a].setIcon({path:MAP_PIN,fillColor:o,fillOpacity:1,strokeColor:"",strokeWeight:0})})),google.maps.event.addDomListener(window,"load",o)})}(jQuery);